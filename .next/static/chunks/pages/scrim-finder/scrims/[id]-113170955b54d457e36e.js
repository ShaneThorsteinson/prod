(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1974],{7322:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(7946)},7946:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(6010),s=n(628),i=n.n(s),c=n(5893);function o(e){var t=e.className,n=(0,r.Z)(i().wrap,t);return(0,c.jsx)("div",{className:n,children:(0,c.jsx)("div",{className:i().spinner})})}},4116:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(4942),s=n(5987),i=n(9158),c=n(8111),o=n(5893),a=["users"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){var t=e.users,n=(0,s.Z)(e,a);return(0,o.jsx)(i.Z.Group,u(u({},n),{},{children:t.map((function(e){var t=e.user,n=e.isCaptain;return(0,o.jsx)(c.Z,{content:(null===t||void 0===t?void 0:t.activisionId)||t.name,children:(0,o.jsx)(i.Z,{image:t.image,isCaptain:n})},t.id)}))}))}},7897:function(e,t,n){"use strict";var r=n(4942),s=n(9993),i=n(9650),c=n(7322),o=n(1163),a=n(7294),l=n(7068),u=n(5893);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.Z=function(e){var t=function(t){var n=(0,l.a)(),m=n.user,f=n.isLoading,p=(0,o.useRouter)();return(0,a.useEffect)((function(){f||m||p.push("/signin")}),[m,f]),f||!m?(0,u.jsx)(s.Z,{children:(0,u.jsx)(i.Z,{className:"mt-20",children:(0,u.jsx)(c.Z,{className:"h-80"})})}):(0,u.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))};return e.getInitialProps&&(t.getInitialProps=e.getInitialProps),t}},8343:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(4942),s=n(5987),i=n(9993),c=n(7310),o=n(2713),a=n(7322),l=n(4116),u=n(6064),d=n(4658),m=n(9528),f=n(9650),p=n(1317),j=n(8833),v=n(8440),h=n(9626),x=n(8336),O=n(9214),b=n(7294),g=n(7151),y=n(1163),w=n(2982),Z=n(5893),P=["title","scrim","onClose","onDecline","onAccept"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t=e.onComplete,n=void 0===t?function(e){return e}:t,r=(0,b.useState)(30),s=r[0],i=r[1];return(0,g.Yz)((function(){return i(s-1)}),1e3),(0,b.useEffect)((function(){0===s&&n()}),[s]),(0,Z.jsxs)("div",{className:"mt-4 text-white text-center font-roboto",children:["Invitation sent wait for the other team to respond. ",(0,Z.jsx)("strong",{children:s})," seconds."]})};function C(e){e.title;var t,n=e.scrim,r=e.onClose,i=void 0===r?function(e){return e}:r,c=(e.onDecline,e.onAccept,(0,s.Z)(e,P)),o=(0,b.useState)(!1),a=o[0],l=o[1],u=(0,b.useState)(null),m=u[0],f=u[1],p=(0,y.useRouter)().query.id,v=n.id,h=n.team;return(0,Z.jsxs)(O.Z,S(S({onClose:function(){a||i()},shined:!0},c),{},{children:[(0,Z.jsx)(O.Z.Header,{title:"Send scrim request"}),(0,Z.jsxs)(O.Z.Body,{children:[(0,Z.jsxs)("div",{className:"mt-4 flex flex-col items-center space-y-1",children:[(0,Z.jsx)("div",{className:"text-center w-[80px] h-[80px]",children:(0,Z.jsx)("img",{src:null!==(t=h.logo)&&void 0!==t?t:"/assets/images/agent-default.svg",alt:""})}),(0,Z.jsx)("div",{className:"text-white text-lg font-semibold",children:h.name}),(0,Z.jsx)(j.Z,{size:"small",division:h.division})]}),a&&(0,Z.jsx)(_,{onComplete:function(){l(!1),f("Your opponent did not respond to your request")}}),m&&(0,Z.jsx)("div",{className:"text-white text-center mt-4",children:m})]}),(0,Z.jsxs)(O.Z.Footer,{className:"justify-between space-x-2",children:[(0,Z.jsx)(d.Z,{onClick:function(){i()},className:"flex-1",disabled:a,children:"Cancel"}),(0,Z.jsx)(d.Z,{shined:!0,onClick:function(){l(!0),f(null),w.Z.sendScrimRequest(v,p).then((function(e){console.log("ScrimRequest",e)}))},loading:a,className:"flex-1",type:"accent",children:"Send"})]})]}))}var D=n(7468),k=n(9066),E=n(1116),q=n(8767),I=n(5338),z=n(7068),A=n(7897),H=n(9008),R=["name","image"];function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(e){var t=e.name,n=e.image,r=(0,s.Z)(e,R);return(0,Z.jsxs)("div",G(G({className:"flex items-center cursor-pointer"},r),{},{children:[(0,Z.jsx)("img",{width:30,height:30,src:null!==n&&void 0!==n?n:"/assets/images/agent-default.svg",alt:""}),(0,Z.jsx)("span",{className:"ml-2",children:t})]}))},T=[{Header:"team name",accessor:"team_name"},{Header:"rank division",accessor:"rank_division"},{Header:"Teammates",accessor:"teammates"},{Header:"special requests",accessor:"special_requests"},{Header:"",accessor:"button_requests"}];var M=(0,A.Z)((function(){var e=(0,q.useQuery)("scrims",w.Z.getAllScrims,{refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnWindowFocus:!1}),t=e.data,n=e.status,r=e.refetch,s=(0,z.a)().user,O=(0,b.useState)(null),g=O[0],P=O[1],N=(0,b.useState)(null),S=N[0],_=N[1],A=(0,b.useState)(!1),R=A[0],F=A[1],G=(0,b.useState)(!1),M=G[0],B=G[1],X=(0,b.useState)([]),Y=X[0],Q=X[1],U=(0,b.useState)(null),V=U[0],W=U[1],J=(0,y.useRouter)(),K=J.query.id,$=(0,q.useMutation)(w.Z.leaveScrim),ee=$.mutateAsync,te=$.isLoading,ne=(0,I.Z)();(0,b.useEffect)((function(){if(K)return ne.on("scrims",(function(){r()})),ne.on("scrim_request",(function(e){"INCOMING"!==e.action?"ACCEPTED"===e.action&&J.push("/match/".concat(e.payload.id)):P(e.payload)})),function(){ne.off("scrims").off("scrim_request")}}),[K]);var re=function(e){return function(t){t.preventDefault(),_(e)}};return(0,b.useEffect)((function(){if(!(!(null!==t&&void 0!==t&&t.length)>0)){var e=t.map((function(e){var t;return{team_name:(0,Z.jsx)(L,{onClick:function(){return t=e.team,W(t),void F(!0);var t},name:e.team.name,image:e.team.logo}),rank_division:(0,Z.jsx)(j.Z,{size:"large",division:e.team.division}),teammates:(0,Z.jsx)(l.Z,{className:"whitespace-nowrap",users:e.team.players}),special_requests:null!==(t=e.specialRequests)&&void 0!==t?t:(0,Z.jsx)("div",{className:"text-gray-900",children:"n/a"}),button_requests:(0,Z.jsx)(d.Z,{size:"small",onClick:re(e),disabled:e.team.players.find((function(e){return e.userId===(null===s||void 0===s?void 0:s.id)})),outlined:!0,children:"Request"})}}));Q(e)}}),[t]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(H.default,{children:(0,Z.jsx)("title",{children:"Scrims"})}),R&&(0,Z.jsx)(D.Z,{team:V,onClose:function(){return F(!1)}}),g&&(0,Z.jsx)(x.Z,{request:g,onClose:function(){return P(null)}}),S&&(0,Z.jsx)(C,{scrim:S,onClose:function(){return _(null)}}),(0,Z.jsx)(i.Z,{children:(0,Z.jsxs)(f.Z,{className:"mt-20 pt-10",children:[(0,Z.jsx)(c.Z,{title:"Scrim Finder",descripiton:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras nisl tellus, elementum quis sodales at, sagittis ut nulla. Praesent sed turpis eu diam vulputate iaculis nec ac nunc."}),(0,Z.jsxs)(u.Z,{className:"mt-10 p-4 md:pt-6 lg:p-8 lg:pt-6",children:[(0,Z.jsx)(o.Z.Header,{title:"Request",titleSecondary:"a scrim from another team",icon:(0,Z.jsx)(p.Z,{className:"text-primary-500",icon:(0,Z.jsx)(E.Z,{size:14})}),actions:(0,Z.jsxs)("div",{className:"flex items-center w-full flex-wrap space-x-0 space-y-2 mt-2 md:space-x-4 md:space-y-0 md:mt-0 md:w-auto",children:[(0,Z.jsxs)(d.Z,{onClick:function(){B(!M)},className:"w-full md:w-auto",size:"small",outlined:!0,children:[M?"Hide":"Show"," filter"]}),(0,Z.jsx)(d.Z,{onClick:function(e){e.preventDefault(),ee().then((function(){return J.push("/scrim-finder")}))},className:"w-full md:w-auto",size:"small",loading:te,outlined:!0,children:"Leave scrim finder"})]})}),M&&(0,Z.jsxs)("div",{className:"flex flex-col md:flex-row justify-between md:items-center border-t border-b border-[#2A2A2D] py-2.5 mt-4",children:[(0,Z.jsx)(m.Z,{children:"Show teams of the same rank division only"}),(0,Z.jsxs)("div",{className:"flex items-center flex-wrap mt-4 md:mt-0",children:[(0,Z.jsx)("span",{className:"text-gray-500 mr-2 font-roboto",children:"Show my team to teams from"}),(0,Z.jsxs)(v.Z,{className:"w-full mt-1 md:mt-0 md:w-auto",size:"small",defaultValue:"",children:[(0,Z.jsx)(v.Z.Option,{value:"",children:"All divisions"}),(0,Z.jsx)(v.Z.Option,{value:"iron",children:"Iron division"}),(0,Z.jsx)(v.Z.Option,{value:"silver",children:"Silver division"}),(0,Z.jsx)(v.Z.Option,{value:"gold",children:"Gold division"})]})]})]}),("idle"===n||"loading"===n)&&(0,Z.jsx)(a.Z,{className:"h-80"}),(null===t||void 0===t?void 0:t.length)>0&&(0,Z.jsx)(h.Z,{className:"mt-4",columns:T,data:Y})]}),(0,Z.jsx)(k.Z,{className:"mt-4"})]})})]})}))},3987:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/scrim-finder/scrims/[id]",function(){return n(8343)}])},628:function(e){e.exports={wrap:"spinner_wrap__2GU6t",spinner:"spinner_spinner__1CPhb"}},9008:function(e,t,n){e.exports=n(639)}},function(e){e.O(0,[3014,9133,7506,4172,7151,9521,9471,5855,4807,2497,9774,2888,179],(function(){return t=3987,e(e.s=t);var t}));var t=e.O();_N_E=t}]);